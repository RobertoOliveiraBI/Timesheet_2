# üöÄ Tractionfy Timesheet SaaS

![Status do Projeto](https://img.shields.io/badge/status-Em%20Desenvolvimento-blue)
![Licen√ßa](https://img.shields.io/badge/license-MIT-green)
![Tecnologias](https://img.shields.io/badge/backend-Node.js%20%7C%20Express-green)
![Tecnologias](https://img.shields.io/badge/frontend-HTML%20%7C%20CSS%20%7C%20JS-orange)
![Banco de Dados](https://img.shields.io/badge/database-Replit%20DB-lightgrey)

## Sum√°rio

1.  [Sobre o Projeto](#-sobre-o-projeto)
2.  [Objetivos Gerais](#-objetivos-gerais)
3.  [Funcionalidades Principais](#-funcionalidades-principais)
4.  [Tecnologias Utilizadas (Implementa√ß√£o Inicial no Replit)](#-tecnologias-utilizadas-implementa√ß√£o-inicial-no-replit)
5.  [Stack Tecnol√≥gica Recomendada para Produ√ß√£o](#-stack-tecnol√≥gica-recomendada-para-produ√ß√£o)
6.  [Estrutura do Projeto (M√≥dulos)](#-estrutura-do-projeto-m√≥dulos)
7.  [Hist√≥rias de Usu√°rio](#-hist√≥rias-de-usu√°rio)
8.  [M√©tricas de Sucesso](#-m√©tricas-de-sucesso)
9.  [Riscos e Depend√™ncias](#-riscos-e-depend√™ncias)
10. [Como Contribuir](#-como-contribuir)
11. [Licen√ßa](#-licen√ßa)
12. [Contato](#-contato)

---

## üåü Sobre o Projeto

O **Tractionfy Timesheet** √© um sistema SaaS (Software as a Service) inovador, projetado especificamente para atender √†s necessidades de grandes ag√™ncias de marketing com equipes h√≠bridas (presenciais e remotas), m√∫ltiplos clientes, projetos e campanhas.

Nosso prop√≥sito √© transformar a gest√£o de tempo de uma tarefa burocr√°tica em uma ferramenta estrat√©gica. A plataforma permitir√° a apropria√ß√£o precisa das horas trabalhadas em campanhas e clientes espec√≠ficos, a categoriza√ß√£o e an√°lise de atividades n√£o debit√°veis, e o fornecimento de relat√≥rios gerenciais acion√°veis para otimizar a aloca√ß√£o de recursos, o faturamento e a rentabilidade.

Com uma interface web responsiva, o Tractionfy Timesheet garante praticidade e efici√™ncia no dia a dia dos colaboradores, gestores e administradores.

---

## üéØ Objetivos Gerais

*   **Otimizar a Apropria√ß√£o de Horas:** Garantir o registro preciso e confi√°vel das horas em projetos, campanhas e clientes, oferecendo transpar√™ncia.
*   **Suportar Equipes H√≠bridas:** Prover flexibilidade no registro e rastreabilidade para colaboradores remotos e presenciais.
*   **Identificar Horas N√£o Debit√°veis:** Categorizar e analisar o tempo gasto em atividades internas para otimiza√ß√£o de efici√™ncia e direcionamento de treinamentos.
*   **Fornecer Dados Acion√°veis:** Gerar informa√ß√µes para faturamento preciso e an√°lise de rentabilidade por cliente, projeto e campanha.
*   **Automatizar Fluxos:** Reduzir retrabalho e acelerar o ciclo de faturamento atrav√©s da automa√ß√£o do fechamento mensal e aprova√ß√µes.
*   **Manter Hist√≥rico Audit√°vel:** Assegurar conformidade interna e atendimento a normas de privacidade (LGPD/GDPR).

---

## ‚ú® Funcionalidades Principais

O Tractionfy Timesheet ser√° um sistema modular, focado em clareza, escalabilidade e facilidade de manuten√ß√£o, priorizando a experi√™ncia do usu√°rio e a confiabilidade dos dados.

1.  **Gest√£o de Usu√°rios e Equipes:**
    *   Perfis diferenciados (Master, Administrador, Gestor, Colaborador) com permiss√µes granulares.
    *   Hierarquia organizacional flex√≠vel (times, departamentos, l√≠deres).
    *   Cadastro de colaboradores com informa√ß√µes de contato, taxas hor√°rias internas e custo real.
    *   SSO opcional via Google Workspace ou Microsoft 365.

2.  **Gest√£o de Clientes, Projetos e Campanhas:**
    *   Registro de clientes com dados completos, contratos e prazo de vig√™ncia.
    *   Cria√ß√£o de projetos associados a um cliente, com descri√ß√£o, cronograma e or√ßamento estimado.
    *   M√∫ltiplas campanhas dentro de cada projeto, com objetivos, datas e status individuais.
    *   Defini√ß√£o de tarefas e atividades detalhadas, marcadas como debit√°veis ou n√£o debit√°veis.
    *   Templates de projetos e campanhas para agilizar configura√ß√µes.
    *   Aloca√ß√£o de equipes a projetos e campanhas espec√≠ficas, com visibilidade de carga de trabalho.

3.  **Entrada de Horas (Timesheet):**
    *   Interface clean e responsiva com grade di√°ria ou semanal para lan√ßamentos manuais.
    *   Cron√¥metro integrado para controle em tempo real.
    *   Associa√ß√£o obrigat√≥ria de cada entrada a colaborador, data, cliente, projeto, campanha e tarefa.
    *   Sele√ß√£o do tipo de hora (fatur√°vel vs. interno/administrativo) e campo de descri√ß√£o livre.
    *   Status de entrada (rascunho, pendente, aprovado, rejeitado) e valida√ß√µes para evitar duplicatas.

4.  **Fluxo de Aprova√ß√£o:**
    *   Configura√ß√µes de aprova√ß√£o multin√≠vel, com regras por time ou projeto.
    *   Notifica√ß√µes autom√°ticas por e-mail e in-app.
    *   Vis√£o consolidada de timesheets pendentes para aprova√ß√£o em massa.
    *   Possibilidade de coment√°rios em aprova√ß√µes ou rejei√ß√µes.
    *   Hist√≥rico completo de aprova√ß√£o para auditabilidade.

5.  **Relat√≥rios e BI:**
    *   Dashboard customiz√°vel com m√©tricas chave (horas totais, debit√°veis vs. n√£o debit√°veis, produtividade m√©dia).
    *   Relat√≥rios detalhados por colaborador, equipe, projeto/campanha e cliente.
    *   An√°lise de horas n√£o debit√°veis por categoria (administrativo, reuni√µes, treinamento, prospec√ß√£o).
    *   Indicadores de utiliza√ß√£o (percentual de horas fatur√°veis vs. n√£o fatur√°veis).
    *   Exporta√ß√£o em CSV, XLS e PDF com filtros avan√ßados.

6.  **Configura√ß√µes e Administra√ß√£o:**
    *   Defini√ß√£o de feriados, hor√°rios de expediente e fuso hor√°rio da ag√™ncia.
    *   Gest√£o de taxas internas e de faturamento por colaborador, fun√ß√£o ou projeto.
    *   Personaliza√ß√£o de categorias de horas n√£o fatur√°veis.
    *   Campos customizados em projetos ou tarefas.
    *   Logs de auditoria para todas as a√ß√µes cr√≠ticas.

7.  **Integra√ß√µes (APIs):**
    *   Importa√ß√£o de projetos e tarefas de Asana, Jira, Trello e Monday.com.
    *   Sincroniza√ß√£o de clientes via CRM (e.g., Salesforce).
    *   Exporta√ß√£o de horas fatur√°veis para QuickBooks, Xero ou sistemas pr√≥prios de contabilidade.
    *   Integra√ß√£o de colaboradores e horas com ERPs como OMIE via API bidirecional.
    *   Webhooks para alertas em Slack, Microsoft Teams ou e-mail.

8.  **UX/UI e Performance:**
    *   Design responsivo para desktop, tablet e mobile.
    *   Navega√ß√£o fluida com carregamento r√°pido e filtros din√¢micos.
    *   Notifica√ß√µes contextuais.
    *   Aplica√ß√£o de padr√µes de acessibilidade.

9.  **Seguran√ßa e Conformidade:**
    *   Controle de Acesso Baseado em Fun√ß√£o (RBAC) com controle fino de acessos.
    *   Criptografia TLS em tr√¢nsito e AES em repouso.
    *   Backups autom√°ticos e plano de recupera√ß√£o de desastres.
    *   Ader√™ncia a LGPD/GDPR e pol√≠ticas internas de privacidade.

---

## üõ† Tecnologias Utilizadas (Implementa√ß√£o Inicial no Replit)

Para a fase inicial de prototipagem e desenvolvimento r√°pido dentro do ambiente Replit, utilizaremos a seguinte stack:

*   **Backend:** Node.js com Express.js para gerenciamento de rotas e APIs REST.
*   **Frontend:** HTML, CSS e JavaScript puro, com suporte a bibliotecas como Bootstrap para UI responsiva.
*   **Banco de Dados:** Replit DB, uma estrutura de chave-valor simples e eficiente para armazenar usu√°rios, projetos, horas lan√ßadas, campanhas e permiss√µes.
*   **Autentica√ß√£o:** Sess√µes simples via middleware, com potencial de evolu√ß√£o para JWT (JSON Web Tokens) conforme a complexidade e seguran√ßa aumentem.
*   **Outros Recursos:** Integra√ß√£o futura com APIs externas para notifica√ß√µes ou dashboards.

---

## üöÄ Stack Tecnol√≥gica Recomendada para Produ√ß√£o

Para garantir a escalabilidade, robustez, seguran√ßa e manutenibilidade de um SaaS de n√≠vel empresarial, especialmente para uma ag√™ncia com 70+ colaboradores e dados cr√≠ticos, a seguinte stack √© **altamente recomendada** para a fase de produ√ß√£o:

*   **Backend:**
    *   **Node.js (Express/NestJS)** ou **Python (FastAPI/Django REST Framework)**.
    *   Arquitetura de microsservi√ßos para modularidade e escalabilidade independente.
    *   APIs RESTful seguras com autentica√ß√£o via **JWT** ou **OAuth2**.
*   **Frontend:**
    *   **React**, **Angular** ou **Vue.js** para uma Single Page Application (SPA) com componentes reutiliz√°veis, melhor performance e tema customiz√°vel.
*   **Banco de Dados:**
    *   **PostgreSQL** como banco de dados relacional principal.
    *   Implementa√ß√£o multi-tenant com schemas isolados por cliente para seguran√ßa e escalabilidade.
    *   √çndices otimizados para relat√≥rios complexos de data e hierarquia.
*   **Infraestrutura:**
    *   **AWS, Azure ou Google Cloud Platform (GCP)** para hospedagem e servi√ßos gerenciados.
    *   **Kubernetes (K8s)** para orquestra√ß√£o de containers e auto-scaling.
    *   **CI/CD (Continuous Integration/Continuous Deployment)** com ferramentas como GitHub Actions, GitLab CI/CD ou Jenkins para deploy cont√≠nuo e automatizado.
*   **Monitoramento e Logs:**
    *   **Prometheus** e **Grafana** para monitoramento de performance e m√©tricas.
    *   **ELK Stack (Elasticsearch, Logstash, Kibana)** ou **Datadog/New Relic** para logs centralizados e an√°lise.
*   **Testes:**
    *   Testes automatizados de unidade, integra√ß√£o e UI (e.g., Jest, Cypress, Playwright).

Esta stack oferece a base necess√°ria para um sistema SaaS de alta performance, seguro e escal√°vel, capaz de evoluir com as necessidades da ag√™ncia.

---

## üèó Estrutura do Projeto (M√≥dulos)

O projeto ser√° organizado em m√≥dulos l√≥gicos para facilitar o desenvolvimento, manuten√ß√£o e escalabilidade.

```
.
‚îú‚îÄ‚îÄ server.js               # Ponto de entrada do backend (inicializa Express e middlewares)
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îî‚îÄ‚îÄ auth.js             # Middleware de autentica√ß√£o (ensureAuth)
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js             # Rotas de autentica√ß√£o (/login, /logout)
‚îÇ   ‚îú‚îÄ‚îÄ clientes.js         # Rotas CRUD para clientes (/api/clientes)
‚îÇ   ‚îú‚îÄ‚îÄ projetos.js         # Rotas CRUD para projetos (/api/projetos)
‚îÇ   ‚îú‚îÄ‚îÄ campanhas.js        # Rotas CRUD para campanhas (/api/campanhas)
‚îÇ   ‚îú‚îÄ‚îÄ horas.js            # Rotas para entrada de horas (/api/horas)
‚îÇ   ‚îú‚îÄ‚îÄ aprovacao.js        # Rotas para aprova√ß√£o de timesheets (/api/horas/pending, /api/horas/:id/approve)
‚îÇ   ‚îú‚îÄ‚îÄ relatorios.js       # Rotas para relat√≥rios e BI (/api/report/...)
‚îÇ   ‚îî‚îÄ‚îÄ config.js           # Rotas para configura√ß√µes e administra√ß√£o (/api/config/...)
‚îú‚îÄ‚îÄ public/                 # Arquivos est√°ticos do frontend
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # P√°gina inicial (redireciona para login ou dashboard)
‚îÇ   ‚îú‚îÄ‚îÄ login.html          # P√°gina de login
‚îÇ   ‚îú‚îÄ‚îÄ clientes.html       # Frontend para gest√£o de clientes
‚îÇ   ‚îú‚îÄ‚îÄ projetos.html       # Frontend para gest√£o de projetos
‚îÇ   ‚îú‚îÄ‚îÄ campanhas.html      # Frontend para gest√£o de campanhas
‚îÇ   ‚îú‚îÄ‚îÄ timesheet.html      # Frontend para entrada de horas
‚îÇ   ‚îú‚îÄ‚îÄ approvals.html      # Frontend para aprova√ß√£o de timesheets
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html      # Frontend para relat√≥rios e dashboard
‚îÇ   ‚îú‚îÄ‚îÄ config.html         # Frontend para configura√ß√µes administrativas
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css       # Estilos globais
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ main.js         # L√≥gica JS global
‚îÇ       ‚îú‚îÄ‚îÄ auth.js         # L√≥gica JS para autentica√ß√£o
‚îÇ       ‚îú‚îÄ‚îÄ clientes.js     # L√≥gica JS para clientes
‚îÇ       ‚îú‚îÄ‚îÄ projetos.js     # L√≥gica JS para projetos
‚îÇ       ‚îú‚îÄ‚îÄ campanhas.js    # L√≥gica JS para campanhas
‚îÇ       ‚îú‚îÄ‚îÄ timesheet.js    # L√≥gica JS para timesheet
‚îÇ       ‚îú‚îÄ‚îÄ approvals.js    # L√≥gica JS para aprova√ß√µes
‚îÇ       ‚îú‚îÄ‚îÄ dashboard.js    # L√≥gica JS para relat√≥rios
‚îÇ       ‚îî‚îÄ‚îÄ config.js       # L√≥gica JS para configura√ß√µes
‚îú‚îÄ‚îÄ integrations/           # M√≥dulo para integra√ß√µes com APIs externas
‚îÇ   ‚îú‚îÄ‚îÄ omie.js             # Fun√ß√µes de sincroniza√ß√£o com API OMIE
‚îÇ   ‚îî‚îÄ‚îÄ webhooks.js         # Fun√ß√µes para webhooks (Slack, Teams, Email)
‚îî‚îÄ‚îÄ package.json            # Depend√™ncias do Node.js
```

### Detalhamento dos M√≥dulos:

*   **M√≥dulo 1 ‚Äì Autentica√ß√£o e Usu√°rios:**
    *   `server.js`: Inicializa Express e `express-session`.
    *   `routes/auth.js`: Rota `POST /login` (valida no Replit DB `user:{email}` e cria sess√£o), rota `GET /logout` (destr√≥i sess√£o).
    *   `middleware/auth.js`: Middleware `ensureAuth` para proteger rotas.
    *   Replit DB: Guarda `user:{email}` com campos `{senhaHash, role}`.
    *   Testes via `curl` para login bem-sucedido e falha.

*   **M√≥dulo 2 ‚Äì Gest√£o de Clientes/Projetos/Campanhas:**
    *   `routes/clientes.js`: CRUD em `/api/clientes`, usando Replit DB keys `cliente:{id}` com `{nome, contratoVigente}`.
    *   `routes/projetos.js`: CRUD em `/api/projetos` referenciando `clienteId`.
    *   `routes/campanhas.js`: CRUD em `/api/campanhas` referenciando `projetoId`.
    *   Frontend: `clientes.html`, `projetos.html`, `campanhas.html` com tabelas Bootstrap e formul√°rios, JS para `fetch` nas rotas e renderiza√ß√£o din√¢mica.

*   **M√≥dulo 3 ‚Äì Timesheet (Entrada de Horas):**
    *   `routes/horas.js`: `POST /api/horas` que recebe `{colaboradorId, data, clienteId, projetoId, campanhaId, atividade, horas, descricao}`. Armazena em key `hora:{uuid}` e adiciona em √≠ndice por colaborador e data.
    *   Frontend: `timesheet.html` com componente de grade semanal (`week-grid`, `save-button`), JS para montar dropdowns de tarefas via `GET /api/campanhas`, inputs de horas e descri√ß√£o, bot√£o chama `POST`, valida√ß√£o no cliente e servidor para aus√™ncia de duplicatas.

*   **M√≥dulo 4 ‚Äì Aprova√ß√£o de Timesheets:**
    *   `routes/aprovacao.js`: `GET /api/horas/pending` (filtra `status=pendente`), `PATCH /api/horas/:id/approve` (define `status=aprovado`, `approverId`, `timestamp`), `PATCH /api/horas/:id/reject` (define `status=rejeitado` e `comment`).
    *   Frontend: `approvals.html` lista pend√™ncias com bot√µes (`approve-{{id}}`, `reject-{{id}}`), modal de coment√°rio em rejei√ß√£o, JS faz `fetch` nos endpoints.

*   **M√≥dulo 5 ‚Äì Relat√≥rios e Dashboard:**
    *   `routes/relatorios.js`: `GET /api/report/colaborador/:id?from=&to=` (agrega horas por tipo), `GET /api/report/cliente/:id` e `/api/report/projeto/:id` (retornam JSON com totais e percentuais).
    *   Frontend: `dashboard.html` com componente `ReportTable` que renderiza tabela com filtros de data e bot√£o ‚ÄúExportar CSV‚Äù (converte JSON em CSV e dispara download).

*   **M√≥dulo 6 ‚Äì Configura√ß√µes e Administra√ß√£o:**
    *   `routes/config.js`: CRUD em `/api/config/feriados`, `/api/config/categorias` e `/api/config/taxas`. Armazena em keys `config:feriado:{id}`, `config:categoria:{id}` e `config:taxa:{id}`.
    *   Frontend: `config.html` com formul√°rios Bootstrap para cada entidade, JS faz `fetch` nas rotas de configura√ß√£o e renderiza listas edit√°veis.

*   **M√≥dulo 7 ‚Äì Integra√ß√µes Futuras:**
    *   `integrations/omie.js`: Fun√ß√£o `syncOmie()` que faz `fetch` na API externa, mapeia clientes para Replit DB em `cliente:{id}`. Exp√µe `POST /api/integrations/omie/sync` para gatilho manual ou agendado.
    *   `integrations/webhooks.js`: Prepara fun√ß√µes para notifica√ß√µes em Slack, Microsoft Teams ou e-mail.

---

## üë§ Hist√≥rias de Usu√°rio

*   **Como colaborador**, desejo iniciar um cron√¥metro ou preencher manualmente minhas horas para associar ao projeto e tarefa correta, mantendo registro confi√°vel.
*   **Como gestor**, desejo revisar lan√ßamentos pendentes de minha equipe em uma √∫nica tela e aprovar ou rejeitar com coment√°rios para alinhar expectativas.
*   **Como administrador**, desejo fechar o m√™s com um clique, adicionando observa√ß√µes opcionais e liberando o pr√≥ximo per√≠odo automaticamente.
*   **Como master**, desejo configurar hierarquias de aprova√ß√£o, categorias de horas e integra√ß√£o com OMIE para adaptar o sistema √† realidade da ag√™ncia.

---

## üìà M√©tricas de Sucesso

*   **Ado√ß√£o:** 80% dos colaboradores utilizando o sistema no primeiro m√™s ap√≥s o rollout.
*   **Efici√™ncia no Fechamento:** Redu√ß√£o de 50% do tempo gasto no fechamento mensal de timesheets.
*   **Precis√£o:** ‚â• 99% de precis√£o nos registros de horas fatur√°veis.
*   **Otimiza√ß√£o de Horas N√£o Debit√°veis:** Diminui√ß√£o de 40% nas horas n√£o debit√°veis ap√≥s 3 meses de uso cont√≠nuo.
*   **Satisfa√ß√£o do Usu√°rio (CSAT):** ‚â• 4,5/5 em pesquisa trimestral.

---

## ‚ö†Ô∏è Riscos e Depend√™ncias

*   **Depend√™ncia de APIs Externas:** A disponibilidade e estabilidade da API OMIE e de outras ferramentas terceiras para integra√ß√µes.
*   **Curva de Aprendizado:** Necessidade de treinamento adequado para colaboradores que n√£o est√£o familiarizados com sistemas de timesheet.
*   **Adequa√ß√£o Cultural:** A necessidade de adaptar as categorias de horas n√£o fatur√°veis √† cultura interna espec√≠fica de cada ag√™ncia.
*   **Escalabilidade:** Gerenciamento de picos de registros simult√¢neos, especialmente em finais de expedientes ou per√≠odos de fechamento.

---

## ü§ù Como Contribuir

Agradecemos o interesse em contribuir com o Tractionfy Timesheet!

1.  Fa√ßa um fork do reposit√≥rio.
2.  Crie uma nova branch (`git checkout -b feature/sua-feature`).
3.  Fa√ßa suas altera√ß√µes e commit (`git commit -m 'feat: Adiciona nova funcionalidade X'`).
4.  Envie para a branch (`git push origin feature/sua-feature`).
5.  Abra um Pull Request detalhando suas mudan√ßas.

---

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a Licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

---

## üìß Contato

Para d√∫vidas, sugest√µes ou suporte, entre em contato com [Seu Nome/Email/Link para Contato].

---
