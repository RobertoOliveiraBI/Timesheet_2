Prompt para IA (modelo Vibe Coding)
Contexto:

Dois usuÃ¡rios foram cadastrados no sistema, mas nÃ£o conseguem acessar. ApÃ³s investigaÃ§Ã£o, foi identificado que as senhas deles nÃ£o foram armazenadas com criptografia, o que pode estar impedindo a autenticaÃ§Ã£o correta. O restante do sistema nÃ£o deve ser alterado, apenas a lÃ³gica de persistÃªncia da senha.

LÃ³gica:

Presumimos que o sistema armazena os dados dos usuÃ¡rios em um banco de dados, porÃ©m nÃ£o aplicou hashing (ex: bcrypt) na senha ao cadastrar. Isso Ã© uma falha grave de seguranÃ§a e precisa ser corrigida. A senha deve ser criptografada no momento da criaÃ§Ã£o do usuÃ¡rio e validada corretamente no login.

AÃ§Ã£o:

Corrigir o cÃ³digo responsÃ¡vel pelo cadastro de usuÃ¡rios para que aplique hashing na senha antes de salvar, e garantir que o login utilize a verificaÃ§Ã£o correta com base nesse hash.

Resultados:

As senhas dos usuÃ¡rios devem ser armazenadas criptografadas (com seguranÃ§a), e os usuÃ¡rios devem conseguir fazer login normalmente. Nenhuma outra parte do sistema deve ser alterada.

Entradas:

UsuÃ¡rios afetados:

fernando@tractionfy.com

eduardo.marciano@gt7.com.br

Ambiente: Replit
Framework: presumivelmente Node.js com Express (ou outro backend JS)

Formato:

Aplicar o modelo de tarefas com checklist para execuÃ§Ã£o das etapas

A cada etapa, explicar detalhadamente o que foi alterado

Utilizar o mÃ­nimo de alteraÃ§Ãµes possÃ­vel, com foco na clareza e seguranÃ§a

âœ… Requisitos Funcionais:

Corrigir o cadastro de usuÃ¡rios para que as senhas sejam armazenadas com hash seguro (ex: bcrypt)

Corrigir a lÃ³gica de login para comparar a senha usando a verificaÃ§Ã£o de hash

Garantir que os registros existentes sem hash sejam tratados (se necessÃ¡rio)

ğŸ—ƒï¸ Banco de Dados:

NÃ£o Ã© necessÃ¡rio criar uma nova tabela, mas Ã© preciso garantir que a coluna de senha jÃ¡ esteja preparada para armazenar o hash

Sem necessidade de novos relacionamentos

Seguir o padrÃ£o atual do projeto, apenas ajustar a lÃ³gica de persistÃªncia da senha

ğŸ’¾ PersistÃªncia:

A senha deve ser automaticamente criptografada antes de ser salva na base

O cadastro deve validar se o campo de senha estÃ¡ presente

Implementar feedback em caso de erro (senha vazia, ou problema de hash)

ğŸ” Controle de Acesso:

A autenticaÃ§Ã£o deve utilizar bcrypt.compare (ou equivalente) para validar a senha no login

Nenhum dado sensÃ­vel deve ser logado no console

Os campos de senha nunca devem ser retornados em nenhuma API

ğŸ¨ Frontend:

Nenhuma alteraÃ§Ã£o Ã© necessÃ¡ria no frontend neste momento, desde que o backend funcione corretamente

âš ï¸ Importante:

NÃ£o altere nenhuma outra parte do sistema

Teste todas as funÃ§Ãµes de criaÃ§Ã£o, ediÃ§Ã£o e login de usuÃ¡rios

Valide e trate os campos obrigatÃ³rios (como email e senha) com mensagens amigÃ¡veis

Aplique boas prÃ¡ticas de seguranÃ§a (nÃ£o exponha hashes, evite logs de senhas)

Garanta que os cadastros de usuÃ¡rios listem corretamente no painel (se existir um)

Regras do Vibe Coding

Primeiro, pense no problema, leia a documentaÃ§Ã£o e crie um plano

O plano deve ter uma lista de tarefas que vocÃª pode marcar como concluÃ­das

Antes de comeÃ§ar a trabalhar, entre em contato comigo e eu verificarei o plano

Em seguida, comece a trabalhar nas tarefas, marcando-as como concluÃ­das conforme vocÃª avanÃ§a

A cada passo, explique detalhadamente o que foi feito

Mantenha as alteraÃ§Ãµes simples e localizadas

Revise o cÃ³digo para garantir que estÃ¡ seguro e sem vazamento de dados

Nunca exponha informaÃ§Ãµes confidenciais

Explique o funcionamento como um engenheiro sÃªnior ensinando